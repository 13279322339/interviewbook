---
search:
    keywords: ['threadlocal', '临界资源', 'thread', '线程']

---

# 解释ThreadLocal

## 答案
相对于synchronized 对临界资源加锁，ThreadLocal提供了另一种不同的思路：避免临界资源的出现，让每个线程拥有自己独自占有的资源，避免了争用。

例如：
多个线程想使用SimpleDateFormat 来进行日期的格式转换

### 问题代码

{%ace edit=false, lang='java', theme='monokai'%}
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
for (int i = 0; i < 10; i++) {
  new Thread(() -> {
    try {
      System.out.println(Thread.currentThread().getName() + " " + sdf.parse("1951-04-21"));
    } catch (Exception e) {
      e.printStackTrace();
    }
  }).start();
}
{%endace%}

### 思路A


> P.S.
JDK 8 之后可以使用 DateTimeFormatter 代替 SimpleDateFormat，它是线程安全的