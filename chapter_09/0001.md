# 单例模式

## 1. 使用理由
当希望整个JVM中仅有此类的一个实例时。

## 2. 实现方式

### 饿汉式

{%ace edit=false, lang='java', theme='monokai'%}
class Singleton {
  private static Singleton me = new Singleton();
  private Singleton() {}
  public static Singleton getInstance() {
    return me;
  }
}
{%endace%}

> ### 要点
* 构造私有，别的类无法创建实例
* 在类加载时就创建本类唯一实例
* 因为类加载只执行一次，没有多线程并发问题

### 懒汉式A

{%ace edit=false, lang='java', theme='monokai'%}
class Singleton {
  private static Singleton me = null;
  private Singleton() {}
  public static synchronized Singleton getInstance() {
    if( me == null ){
      me = new Singleton();
    }
    return me;
  }
}
{%endace%}

> ### 要点
* 构造私有，别的类无法创建实例
* 在类加载时暂时不创建实例，而是在第一次用到时创建
* 如果首次使用 getInstance() 方法是多线程并发，必须添加synchronized 保证线程安全
* 此实现由缺陷：本来只是在首次使用 getInstance() 时才有并发问题，但这个实现是次次都需要synchronized 效率低下

